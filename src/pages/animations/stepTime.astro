---
import { BASE_PATH } from '../../assets/js/lib/config';
import Layout from '../../layouts/Layout.astro';
import { Code } from 'astro:components';

const title = 'Step Time Animation';
const description = '秒針のようなアニメーションを作成する';

const codeExample = `import gsap from "gsap";

gsap.to(".stepTime__clockLine", {
  rotation: 360,
  duration: 30,
  repeat: -1,
  ease: "steps(30)",
  transformOrigin: "left center"
});
`;

const cssExample = `.stepTime {
  &__clock {
    position: relative;
    width: 200px;
    height: 200px;

    &Line {
      border-top: 2px solid #333;
      width: calc(50% - 24px);
      height: 2px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: left center;
      rotate: -90deg;
    }
  }
}
`;

const htmlExample = `<div class="animation__box">
  <div class="stepTime__clock">
    <svg viewBox="0 0 200 200" width="200" height="200" class="stepTime__clock-svg">
      <circle cx="100" cy="100" r="90" fill="none" stroke="#333" stroke-width="3"/>
    </svg>
    <div class="stepTime__clockLine">
    </div>
  </div>
</div>

`;
---

<Layout title={title} description={description}>
  <div class="container">
    <h1 class="animation__title">Step Time Animation</h1>
    <p>秒針のようなアニメーションを作成する</p>
    
    <div class="animation__box">
      <div class="stepTime__clock">
        <svg viewBox="0 0 200 200" width="200" height="200" class="stepTime__clock-svg">
          <circle cx="100" cy="100" r="90" fill="none" stroke="#333" stroke-width="3"/>
        </svg>
        <div class="stepTime__clockLine">
        </div>
      </div>
    </div>

    <section>
      <h2>GSAP</h2>
      <Code lang="js" code={codeExample} class="code -block" />
      <section>
        <h3>GSAPコードの解説</h3>

        <p><code class="code -inline">gsap.to()</code> は、GSAPのアニメーションを開始するためのメソッドです。</p>
        <p><code class="code -inline">rotation: 360</code> は、要素を360度（1回転）回転させるプロパティです。</p>
        <p><code class="code -inline">duration: 30</code> は、アニメーションの時間を30秒に設定します。つまり30秒で1周します。</p>
        <p><code class="code -inline">repeat: -1</code> は、アニメーションを無限に繰り返します。</p>
        <p><code class="code -inline">ease: "steps(30)"</code> は、アニメーションを30個のステップに分割する特殊なイージングです。これにより滑らかな回転ではなく、カクカクとしたステップ状の動きになります。</p>
        <p><code class="code -inline">transformOrigin: "left center"</code> は、回転の中心点を要素の左端中央に設定します。これにより時計の針のような動きを実現できます。</p>
        <p>このアニメーションでは、30秒間で30ステップ（1秒に1ステップ）の時計の秒針のような動きを作成しています。</p>
      </section>

      <h2>HTML / CSS</h2>
      <Code lang="html" code={htmlExample} class="code -block" />
      <Code lang="css" code={cssExample} class="code -block" />
    </section>

    <div class="animation__back">
      <a href={`${BASE_PATH}animations`}>アニメーション一覧に戻る</a>
    </div>
  </div>
</Layout>

<style lang="scss">
  @use '../../assets/css/index.scss';
  @use '../../assets/css/pages/animations/_stepTime.scss';
</style>

<script>
  import gsap from "gsap";

  gsap.to(".stepTime__clockLine", {
    rotation: 360,
    duration: 30,
    repeat: -1,
    ease: "steps(30)",
    transformOrigin: "left center"
  });
</script>